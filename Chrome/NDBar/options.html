<html>
<head>
  <title>Popular Sites Toolbar Options</title>
  <script type="text/javascript" src="config.js"></script>
  <style>
  html,body {margin:0; padding:10px; font:10pt/12pt "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif; color:#333;}
  h2 {font-size:15pt;}
  h2 span {float:right; font-weight:normal; font-size:10pt;}
  #toolbar {width:400px; margin:0; padding:0;}
  #toolbar-options {float:left; width:100%; margin:0; padding:0; list-style:none;}
  #toolbar-options li {float:left; width:180px; margin:2px 0; padding:0;}
  </style>
</head>
<body onload="loadOptions()">
  <h2>Options <span>[<a href="ndtoolbar.html">Exit</a>]</span></h2>
  <nav id="toolbar"><ul id="toolbar-options"></ul></nav>
<script>
function loadOptions() {
  var list = '';

  for(i=0; i<Items.length; i++) {
    var id = Items[i].id,
        label = Items[i].label,
        checked = (typeof(localStorage[id]) == 'undefined' || localStorage[id] == 'on') ? 'checked="checked"' : ''
    ;
    
    list += '<li><input type="checkbox" id="'+id+'" '+checked+' onclick="toggleOption(this)"><label for="'+id+'">'+label+'</label></li>';
  }
  document.getElementById('toolbar-options').innerHTML = list;
}

function toggleOption(radio) {
  var id = radio.id,
      val = (radio.value == 'on') ? 'on' : 'off'
  ;
      
  localStorage[id] = val;
}
</script>
</body>
</html>